<!DOCTYPE html>
<html>
<head>
    <title>博客导航页</title>
    <style>
        /* 基础样式 */
        #recent-posts {
            list-style: none;
            padding: 0;
            max-width: 600px;
            margin: 20px auto;
        }
        #recent-posts li {
            margin: 10px 0;
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        #recent-posts a {
            text-decoration: none;
            color: #2c3e50;
            font-weight: bold;
        }
        #recent-posts a:hover {
            color: #3498db;
        }
        .post-date {
            color: #7f8c8d;
            font-size: 0.9em;
        }
        .loading {
            text-align: center;
            color: #888;
        }
    </style>
</head>
<body>
    <h1>最新文章</h1>
    <ul id="recent-posts">
        <div class="loading">加载中...</div>
    </ul>

    <script>
        // 替换为你的 Typecho 博客 RSS 地址
        const RSS_URL = 'https://你的博客地址/feed';

        // 获取并解析 RSS
        async function loadRecentPosts() {
            try {
                // 使用 CORS 代理解决跨域问题（可选）
                const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
                // const response = await fetch(proxyUrl + RSS_URL);
                const response = await fetch(proxyUrl + RSS_URL, {
                    headers: {
                        'X-Requested-With': 'XMLHttpRequest' // 添加此头部
                    }
                });
                const xmlText = await response.text();
                
                // 解析 XML
                const parser = new DOMParser();
                const xmlDoc = parser.parseFromString(xmlText, "text/xml");
                
                // 提取文章数据（取前3篇）
                const items = xmlDoc.querySelectorAll('item');
                const posts = Array.from(items).slice(0, 3).map(item => ({
                    title: item.querySelector('title').textContent,
                    link: item.querySelector('link').textContent,
                    date: new Date(item.querySelector('pubDate').textContent).toLocaleDateString()
                }));

                // 渲染到页面
                const container = document.getElementById('recent-posts');
                container.innerHTML = posts.map(post => `
                    <li>
                        <a href="${post.link}" target="_blank">${post.title}</a>
                        <div class="post-date">${post.date}</div>
                    </li>
                `).join('');
                
            } catch (error) {
                document.getElementById('recent-posts').innerHTML = 
                    '<div style="color: red">加载失败，请稍后重试</div>';
                console.error('RSS 加载错误:', error);
            }
        }

        // 页面加载后执行
        window.addEventListener('DOMContentLoaded', loadRecentPosts);
    </script>
</body>
</html>
